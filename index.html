<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Controle de Licenças</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .status-ativo { background: linear-gradient(135deg, #10b981, #059669); }
        .status-vencido { background: linear-gradient(135deg, #ef4444, #dc2626); }
        .status-proximo { background: linear-gradient(135deg, #f59e0b, #d97706); }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-lg border-b-4 border-blue-500">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <div class="bg-blue-500 p-3 rounded-lg">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-3xl font-bold text-gray-900">Controle de Licenças URA</h1>
                        <p class="text-gray-600">Gerencie todas as suas licenças de URA em um só lugar</p>
                    </div>
                </div>
                <button onclick="abrirModalNova()" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors duration-200 flex items-center space-x-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                    </svg>
                    <span>Nova Licença</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Dashboard Stats -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm font-medium">Total de Licenças</p>
                        <p class="text-3xl font-bold text-blue-600" id="totalLicencas">0</p>
                    </div>
                    <div class="bg-blue-100 p-3 rounded-lg">
                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                        </svg>
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm font-medium">Total de Canais</p>
                        <p class="text-3xl font-bold text-green-600" id="totalCanais">0</p>
                    </div>
                    <div class="bg-green-100 p-3 rounded-lg">
                        <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                        </svg>
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-md p-6 card-hover">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm font-medium">Total de Campanhas</p>
                        <p class="text-3xl font-bold text-purple-600" id="totalCampanhas">0</p>
                    </div>
                    <div class="bg-purple-100 p-3 rounded-lg">
                        <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <!-- Filtros -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-8">
            <div class="flex flex-wrap gap-4 items-center">
                <div class="flex-1 min-w-64">
                    <input type="text" id="filtroNome" placeholder="Buscar por plataforma..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>
                <select id="filtroTipo" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="">Todos os Tipos</option>
                    <option value="Inbound">Inbound</option>
                    <option value="Outbound">Outbound</option>
                    <option value="Híbrido">Híbrido</option>
                </select>
                <select id="filtroFornecedor" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="">Todos os Fornecedores</option>
                    <option value="Aspect">Aspect</option>
                    <option value="Paneas">Paneas</option>
                    <option value="Pontal">Pontal</option>
                    <option value="Robbu">Robbu</option>
                    <option value="Sinergytech">Sinergytech</option>
                    <option value="TechIA">TechIA</option>
                </select>
            </div>
        </div>

        <!-- Lista de Licenças -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden">
            <div class="px-6 py-4 border-b border-gray-200">
                <h2 class="text-xl font-semibold text-gray-900">Suas Licenças URA</h2>
            </div>
            <div id="listaLicencas" class="divide-y divide-gray-200">
                <!-- Licenças serão inseridas aqui -->
            </div>
        </div>
    </div>

    <!-- Modal Nova Licença -->
    <div id="modalNova" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full max-h-screen overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-semibold text-gray-900">Nova Licença URA</h3>
                    <button onclick="fecharModal()" class="text-gray-400 hover:text-gray-600">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                
                <form id="formNova" onsubmit="adicionarLicenca(event)">
                    <div class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Plataforma</label>
                                <input type="text" id="plataforma" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Código</label>
                                <input type="text" id="codigo" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Carteira</label>
                                <input type="text" id="carteira" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Campanha</label>
                                <input type="text" id="campanha" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tipo</label>
                                <select id="tipo" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">Selecione o tipo</option>
                                    <option value="Inbound">Inbound</option>
                                    <option value="Outbound">Outbound</option>
                                    <option value="Híbrido">Híbrido</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Canais</label>
                                <input type="number" id="canais" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">AV</label>
                                <select id="av" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">Selecione</option>
                                    <option value="Sim">Sim</option>
                                    <option value="Não">Não</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Transbordo</label>
                                <input type="text" id="transbordo" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">DNIS</label>
                                <input type="text" id="dnis" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tech</label>
                                <select id="tech" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">Selecione o fornecedor</option>
                                    <option value="Aspect">Aspect</option>
                                    <option value="Paneas">Paneas</option>
                                    <option value="Pontal">Pontal</option>
                                    <option value="Robbu">Robbu</option>
                                    <option value="Sinergytech">Sinergytech</option>
                                    <option value="TechIA">TechIA</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">KMG</label>
                                <input type="text" id="kmg" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Ambiente</label>
                                <select id="ambiente" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">Selecione o ambiente</option>
                                    <option value="Produção">Produção</option>
                                    <option value="Homologação">Homologação</option>
                                    <option value="Desenvolvimento">Desenvolvimento</option>
                                </select>
                            </div>
                        </div>
                        

                    </div>
                    
                    <div class="flex space-x-3 mt-6">
                        <button type="button" onclick="fecharModal()" class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            Cancelar
                        </button>
                        <button type="submit" class="flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                            Adicionar
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        let licencas = JSON.parse(localStorage.getItem('licencas')) || [];
        
        // Dados de exemplo se não houver licenças URA
        if (licencas.length === 0) {
            licencas = [
                {
                    id: 1,
                    plataforma: "URA Principal",
                    codigo: "URA001",
                    carteira: "Cobrança",
                    campanha: "Campanha Janeiro",
                    tipo: "Inbound",
                    canais: 50,
                    av: "Sim",
                    transbordo: "Call Center",
                    dnis: "0800123456",
                    tech: "Aspect",
                    kmg: "KMG001",
                    ambiente: "Produção"
                },
                {
                    id: 2,
                    plataforma: "URA Backup",
                    codigo: "URA002",
                    carteira: "Vendas",
                    campanha: "Promoção Verão",
                    tipo: "Outbound",
                    canais: 25,
                    av: "Não",
                    transbordo: "Fila Virtual",
                    dnis: "0800654321",
                    tech: "Paneas",
                    kmg: "KMG002",
                    ambiente: "Homologação"
                },
                {
                    id: 3,
                    plataforma: "URA Atendimento",
                    codigo: "URA003",
                    carteira: "Suporte",
                    campanha: "Atendimento 24h",
                    tipo: "Híbrido",
                    canais: 100,
                    av: "Sim",
                    transbordo: "Supervisor",
                    dnis: "0800987654",
                    tech: "Robbu",
                    kmg: "KMG003",
                    ambiente: "Produção"
                }
            ];
            salvarLicencas();
        }
        
        function salvarLicencas() {
            localStorage.setItem('licencas', JSON.stringify(licencas));
        }
        

        
        function formatarValor(valor) {
            return new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            }).format(valor || 0);
        }
        

        
        function getTipoIcon(tipo) {
            const icons = {
                'software': '<svg class="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>',
                'certificado': '<svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>',
                'dominio': '<svg class="w-5 h-5 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"></path></svg>',
                'outro': '<svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>'
            };
            return icons[tipo] || icons['outro'];
        }
        
        function renderizarLicencas() {
            const container = document.getElementById('listaLicencas');
            const filtroNome = document.getElementById('filtroNome').value.toLowerCase();
            const filtroTipo = document.getElementById('filtroTipo').value;
            const filtroFornecedor = document.getElementById('filtroFornecedor').value;
            
            let licencasFiltradas = licencas.filter(licenca => {
                const matchNome = licenca.plataforma.toLowerCase().includes(filtroNome);
                const matchTipo = !filtroTipo || licenca.tipo === filtroTipo;
                const matchFornecedor = !filtroFornecedor || licenca.tech === filtroFornecedor;
                
                return matchNome && matchTipo && matchFornecedor;
            });
            
            if (licencasFiltradas.length === 0) {
                container.innerHTML = `
                    <div class="p-8 text-center text-gray-500">
                        <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        <p class="text-lg font-medium">Nenhuma licença encontrada</p>
                        <p class="text-sm">Adicione uma nova licença ou ajuste os filtros</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = licencasFiltradas.map(licenca => {
                return `
                    <div class="p-6 hover:bg-gray-50 transition-colors fade-in">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4 flex-1">
                                <div class="flex-shrink-0">
                                    <svg class="w-8 h-8 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"></path>
                                    </svg>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center space-x-3 mb-3">
                                        <h3 class="text-lg font-semibold text-gray-900 truncate">${licenca.plataforma}</h3>
                                        <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">${licenca.tipo}</span>
                                    </div>
                                    
                                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600 mb-3">
                                        <div><span class="font-medium">Código:</span> ${licenca.codigo}</div>
                                        <div><span class="font-medium">Carteira:</span> ${licenca.carteira}</div>
                                        <div><span class="font-medium">Campanha:</span> ${licenca.campanha}</div>
                                        <div><span class="font-medium">Canais:</span> ${licenca.canais}</div>
                                    </div>
                                    
                                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600 mb-3">
                                        <div><span class="font-medium">AV:</span> ${licenca.av}</div>
                                        <div><span class="font-medium">Transbordo:</span> ${licenca.transbordo}</div>
                                        <div><span class="font-medium">DNIS:</span> ${licenca.dnis}</div>
                                        <div><span class="font-medium">KMG:</span> ${licenca.kmg}</div>
                                    </div>
                                    
                                    <div class="grid grid-cols-2 md:grid-cols-2 gap-4 text-sm text-gray-600">
                                        <div><span class="font-medium">Tech:</span> <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">${licenca.tech}</span></div>
                                        <div><span class="font-medium">Ambiente:</span> <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs">${licenca.ambiente}</span></div>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2 ml-4">
                                <button onclick="editarLicenca(${licenca.id})" class="text-blue-600 hover:text-blue-800 p-2 rounded-lg hover:bg-blue-50 transition-colors">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                    </svg>
                                </button>
                                <button onclick="excluirLicenca(${licenca.id})" class="text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function atualizarEstatisticas() {
            const totalLicencas = licencas.filter(l => l.av === 'Sim').length;
            const totalCanais = licencas.reduce((total, licenca) => total + (licenca.canais || 0), 0);
            const totalCampanhas = [...new Set(licencas.map(l => l.campanha))].length;
            
            document.getElementById('totalLicencas').textContent = totalLicencas;
            document.getElementById('totalCanais').textContent = totalCanais;
            document.getElementById('totalCampanhas').textContent = totalCampanhas;
        }
        
        function abrirModalNova() {
            document.getElementById('modalNova').classList.remove('hidden');
            document.getElementById('formNova').reset();
        }
        
        function fecharModal() {
            document.getElementById('modalNova').classList.add('hidden');
        }
        
        function adicionarLicenca(event) {
            event.preventDefault();
            
            const novaLicenca = {
                id: Date.now(),
                plataforma: document.getElementById('plataforma').value,
                codigo: document.getElementById('codigo').value,
                carteira: document.getElementById('carteira').value,
                campanha: document.getElementById('campanha').value,
                tipo: document.getElementById('tipo').value,
                canais: parseInt(document.getElementById('canais').value) || 0,
                av: document.getElementById('av').value,
                transbordo: document.getElementById('transbordo').value,
                dnis: document.getElementById('dnis').value,
                tech: document.getElementById('tech').value,
                kmg: document.getElementById('kmg').value,
                ambiente: document.getElementById('ambiente').value
            };
            
            licencas.push(novaLicenca);
            salvarLicencas();
            renderizarLicencas();
            atualizarEstatisticas();
            fecharModal();
        }
        
        function excluirLicenca(id) {
            if (confirm('Tem certeza que deseja excluir esta licença?')) {
                licencas = licencas.filter(licenca => licenca.id !== id);
                salvarLicencas();
                renderizarLicencas();
                atualizarEstatisticas();
            }
        }
        
        function editarLicenca(id) {
            const licenca = licencas.find(l => l.id === id);
            if (licenca) {
                document.getElementById('plataforma').value = licenca.plataforma || '';
                document.getElementById('codigo').value = licenca.codigo || '';
                document.getElementById('carteira').value = licenca.carteira || '';
                document.getElementById('campanha').value = licenca.campanha || '';
                document.getElementById('tipo').value = licenca.tipo || '';
                document.getElementById('canais').value = licenca.canais || '';
                document.getElementById('av').value = licenca.av || '';
                document.getElementById('transbordo').value = licenca.transbordo || '';
                document.getElementById('dnis').value = licenca.dnis || '';
                document.getElementById('tech').value = licenca.tech || '';
                document.getElementById('kmg').value = licenca.kmg || '';
                document.getElementById('ambiente').value = licenca.ambiente || '';

                
                // Modificar o formulário para edição
                const form = document.getElementById('formNova');
                form.onsubmit = function(event) {
                    event.preventDefault();
                    
                    licenca.plataforma = document.getElementById('plataforma').value;
                    licenca.codigo = document.getElementById('codigo').value;
                    licenca.carteira = document.getElementById('carteira').value;
                    licenca.campanha = document.getElementById('campanha').value;
                    licenca.tipo = document.getElementById('tipo').value;
                    licenca.canais = parseInt(document.getElementById('canais').value) || 0;
                    licenca.av = document.getElementById('av').value;
                    licenca.transbordo = document.getElementById('transbordo').value;
                    licenca.dnis = document.getElementById('dnis').value;
                    licenca.tech = document.getElementById('tech').value;
                    licenca.kmg = document.getElementById('kmg').value;
                    licenca.ambiente = document.getElementById('ambiente').value;

                    
                    salvarLicencas();
                    renderizarLicencas();
                    atualizarEstatisticas();
                    fecharModal();
                    
                    // Restaurar para modo de adição
                    form.onsubmit = adicionarLicenca;
                };
                
                abrirModalNova();
            }
        }
        
        // Event listeners para filtros
        document.getElementById('filtroNome').addEventListener('input', renderizarLicencas);
        document.getElementById('filtroTipo').addEventListener('change', renderizarLicencas);
        document.getElementById('filtroFornecedor').addEventListener('change', renderizarLicencas);
        
        // Fechar modal ao clicar fora
        document.getElementById('modalNova').addEventListener('click', function(event) {
            if (event.target === this) {
                fecharModal();
            }
        });
        
        // Inicializar
        renderizarLicencas();
        atualizarEstatisticas();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'987b89193273f1dd',t:'MTc1OTMxNzI1Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
